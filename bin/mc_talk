#!/usr/bin/env python
# -*- coding:utf-8 -*-
from optparse import OptionParser, OptionValueError
from markovchains import markovchains

if __name__ == '__main__':
    usage = "usage: %prog filename/dirname [options]"
    parser = OptionParser(usage)
    parser.add_option('-u', '--user', action='store',
                    help=u'発言したユーザ')
    parser.add_option('-d', '--dbname', action='store',
                    help=u'データベース名')
    parser.add_option('-n', '--num', action='store',
                    help=u'N階の数値')
    (options, args) = parser.parse_args()
    user = ''
    dbname = 'markov'
    order_num = 3
    if options.user != None:
        user = options.user
    if options.dbname != None:
        dbname = options.dbname
    if options.num != None:
        num = int(options.num)
    m = markovchains.MarkovChains(dbname, num)
    m.db.load_db()
    print m.db.make_sentence(user=user)
